(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{217:function(e,t,i){var a=i(238);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(13).default)("dca59b5a",a,!0,{})},223:function(e,t,i){var a=i(252);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(13).default)("7202f66c",a,!0,{})},224:function(e,t,i){"use strict";var a=function(){},r={name:"CheckBox",props:{checked:{type:[Boolean,Number],default:!1},selected:{type:[Boolean,Number],default:!1},checkAll:{type:Function,default:a},click:{type:Function,default:a},wrapClick:{type:Function,default:a}},methods:{clickFn:function(e){this.click(e),this.$emit("click")}},computed:{},data:function(){return{}}},s=(i(237),i(7)),n=Object(s.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"checkbox flex flex-ver",on:{click:e.wrapClick}},[i("div",{staticClass:"checkbox-content flex",on:{click:function(t){return t.stopPropagation(),e.clickFn(t)}}},[i("div",{staticClass:"img-icon"},[e.checked?i("div",{staticClass:"img-icon checked",class:[e.selected?"checkbox-icon":"checkbox-full-icon"]}):i("div",{staticClass:"img-icon",class:[e.selected?"checkbox-icon":"checkbox-full-icon"]})])]),e._v(" "),i("div",{staticClass:"slotWrap"},[i("div",{staticClass:"text"},[e._t("default",[e._v("Текст по умолчанию")])],2)])])},[],!1,null,"3435be68",null);t.a=n.exports},237:function(e,t,i){"use strict";var a=i(217);i.n(a).a},238:function(e,t,i){var a=i(63);(e.exports=i(12)(!1)).push([e.i,".iconBox[data-v-3435be68]{background-color:#fff;overflow:hidden;width:14px;height:15px}.position[data-v-3435be68]{transform:translate(-1px,-1px)}.checkbox-content[data-v-3435be68]{position:relative}.checkbox-unchecked[data-v-3435be68]{color:#d6d6d6;background-color:#fff}.checkbox-checked[data-v-3435be68]{position:absolute;left:3px;top:3px;font-size:10px;color:#4b8af7}.slotWrap[data-v-3435be68]{width:calc(100% - 14px)}.img-icon[data-v-3435be68]{width:12px;height:12px}.img-icon .checkbox-icon[data-v-3435be68]{background:url("+a(i(239))+") 0 0 no-repeat;background-size:100% 100%}.img-icon .checkbox-icon.checked[data-v-3435be68]{background:url("+a(i(240))+") 0 0 no-repeat;background-size:100% 100%}.img-icon .checkbox-full-icon[data-v-3435be68]{background:url("+a(i(241))+") 0 0 no-repeat;background-size:100% 100%}.img-icon .checkbox-full-icon.checked[data-v-3435be68]{background:url("+a(i(242))+") 0 0 no-repeat;background-size:100% 100%}",""])},239:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAARNJREFUaAXtmrENgzAQRWOUAlq6SG6pswJTZYgskjVYITWUVtKlhc7xSaRBonqIYOm7AqQ7f7/njnOntEIIfpqme3psY4wX+3bU5Zx7p2xdWZY3731wFn4cx2f6WB819EquT1VV12Imn1t4O1Nt2Yv00Npbpqs9L+980zTuyIfp+z7+8ll2M5D10gH+rU8GZAAS0BWCAHG5DGCEsIEMQIC4XAYwQthABiBAXC4DGCFsIAMQIC6XAYwQNpABCBCXywBGCBvIAASIy2UAI4QNZAACxOUygBHCBjIAAeJyGcAIYYPsDbhhGF7Lf8UQym7lNjdhBrrddtx+oy7/YQ8bWbGpj6TjMY+ybM9pw46W0bJaZsv+Ba8GPcn3wRT8AAAAAElFTkSuQmCC"},240:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAndJREFUaAXtmr1rFEEYh38XhSAE/OgCBxoIKUQ4tNEqwcIQiGkDCcHSKqTx77CzErRMsBLsDZdCVFAhTQqxESRX5ANCCCFgcnl/XJbM7e04M3s7szeyA8vOvjv7zvPsvHe7OQJIa7fbddlWZduWbdAbGclaJ3vtorMp/VsMRNT2hbVBgVXpLEQErqKuUWBbIqNqNKJ+iwLtiIB7UId6IpEFKoGyF6xagWoF+rwDA1VCZzm+0AdG4PAv8Pgj8PqX25JcdRvuZzThZ5vA113Z9jpzPB+3m6v0FVDhicz3gpXv9itRqkAaPrnnLhKlCejgVYkvF+WUxLL2pQiY4Am6eAd48zALuTsWXMAW/u0j+WurmzXzyFrgSL4pdk8yc1gHi4bnxFYChJ/bAJ6sAzs5JXzAWwkk8J92gK0DYDqHhC94o4AKz8FsrhI+4cmjLaGTs07Z8M6nm62Eb3hyaQWG5cz9m2n0y2OTRAj4fwrw5MsHwPLEJXS6p5MIBU8e7QoksK4SIeHJaP2zyosfwKufiVbv/u514P0k8Oxz562yd0Qnwies7UNKl0ONWwvwIpPEtSvA8amavrtfNDyzOwnwApMEx2Q1H/Ccx/gZSMOYPhPp8Tz2Bc/czgK8yEXCJzxZnEuIFyXNVE73bgDfZuzeKpOcrvu+BDiZTmJsRF47nuZcYgeLXCWk5s8qp2n5sT4EPDn6FmASVWJpDPgwVVBiJje0vktIzf/uNzB/22/Nq/OxX6hAOnmI40JKKASobo5KQHdnQsWrFQh1p3Xz/Bcr0NLZRRBvcQWaEYDqEJt8kNXlbLT/7DFUq9X+iEBDtjXZYignMpK1QfZzSFmzSUc2i4cAAAAASUVORK5CYII="},241:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAOdJREFUWAntmTEKg0AURPMlxdraBba1zhU8VQ6Ri+QaXiH1Wi5Jl1a7zQ6YRhACo7jF/GpdmP+H59h87ZQrxuinabrnY5dSuuDuqDKzd57dO+du3vtoMDeO4zNfNkeZWpn7qev6Ws3kSjMHzw28VfnQ4anQ6s7LzLVta0eaDSGk33x4A8GiSwbZ1yOCIsgSYPXKoAiyBFi9MiiCLAFWrwyKIEuA1SuDIsgSYPXKoAiyBFi9MiiCLAFWb8MwvJY7QrbpVnrsq/GR9Fs13KFPX/4SHat+bNMzzsf8C2AHEP+3hAd4gSd4+wK83j251R0DKgAAAABJRU5ErkJggg=="},242:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAiZJREFUWAntmDtIA0EQhucSjYqFoKCCRSqLaCOksBBE0wq2GitT2ttbKyns7NQusbIQLaxV7DUGEYQUdlY+QDAmzp/LwiXZ3bszt8kJGdjsa27nu38fSdYitsFcdbNCtM3FBKcI2rpojEJFhsh+pa1jqw531EUgZWiGzFixXPWePWaVXt3tKGA6Ma1htQQAkcJqkTDD1UTrAba7dnoKyhS0ZI2Kto4rOBQlulgi2ppWEDU19zXVjVYBd7pItDxBlJq0Qx086UN2TEEnnEDaT7or2RFAGZyA3Jsjig+LWmtuHFAH982/WzZuiEqfrWCixSigG1z6mujsRaDIc1fA8QGi1Sn5w7rWIOAwvhYQcJcpovwC0Xpch9PYFxQcRlUeMwIuMWIHP5y383zJzlWfQcIhhlTBsZitnICDY5Q9AalTMmg4JeBbmej5A92NpoM0AYfoUgWx/dd4h51LdpgM0hScEhAdXiFNwoEDf5qqKKisnzU+4V28Ijlqfljpx3eimfpGco6BF/RyzjmfkZWlU+x0dFPSJBw4XAHhpINEv9OCUk6M6QkQzl4gywFNq4BD7hkQzjpIrORs0f27FeP4MV+AGFgGCeV2H4h27vyE9ubrG7AZsgZ8ZQYOsVyPGd174ghKjhLdvuq82uv7k4IiJNQzCYc4bQEKUJN5D7Bddf+FgrzUQ2sVKMjnf2itiBvMbFjxwBbBVT8XMgxZ4BSG6QYDLs8zYPsFpLLE2R6aiMkAAAAASUVORK5CYII="},251:function(e,t,i){"use strict";var a=i(223);i.n(a).a},252:function(e,t,i){(e.exports=i(12)(!1)).push([e.i,".listDescWrap[data-v-186f674e]{display:flex;justify-content:space-between;height:25px;font-size:12px;padding:0 5px 0 15px;align-items:center;font-family:PingFangSC-Regular;font-size:11px;color:#666;letter-spacing:0}.listDescWrap .fileStatus[data-v-186f674e]{font-family:PingFangSC-Regular;font-size:12px;color:#999;letter-spacing:0}",""])},254:function(e,t,i){"use strict";var a={props:{filesLength:{type:Number,default:0},selectedLength:{type:Number,default:0}},methods:{},data:function(){return{}},computed:{}},r=(i(251),i(7)),s=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"listDescWrap"},[e._t("default",[e._v("По умолчанию используется имя маршрута, которое можно заменить каждым компонентом, связанным со статусом.")]),e._v(" "),i("div",{staticClass:"fileStatus"},[e._v("\n        "+e._s(e.selectedLength?"выбранный"+e.selectedLength+"Файлы / папки":"Всего загружено, всего"+e.filesLength+"个")+"\n    ")])],2)},[],!1,null,"186f674e",null);t.a=s.exports},343:function(e,t,i){var a=i(592);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(13).default)("335d8a98",a,!0,{})},344:function(e,t,i){var a=i(594);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(13).default)("6d22d6d1",a,!0,{})},345:function(e,t,i){var a=i(596);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(13).default)("bb8eac6a",a,!0,{})},584:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(i(585)),s=a(i(588));t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var i=[],a=!0,r=!1,n=void 0;try{for(var o,l=(0,s.default)(e);!(a=(o=l.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},585:function(e,t,i){e.exports={default:i(586),__esModule:!0}},586:function(e,t,i){i(106),i(98),e.exports=i(587)},587:function(e,t,i){var a=i(71),r=i(16)("iterator"),s=i(32);e.exports=i(15).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||s.hasOwnProperty(a(t))}},588:function(e,t,i){e.exports={default:i(589),__esModule:!0}},589:function(e,t,i){i(106),i(98),e.exports=i(590)},590:function(e,t,i){var a=i(21),r=i(100);e.exports=i(15).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},591:function(e,t,i){"use strict";var a=i(343);i.n(a).a},592:function(e,t,i){(e.exports=i(12)(!1)).push([e.i,".grid-wrap{width:120px;text-align:center;padding-bottom:20px;overflow:hidden}.grid-wrap .grid-img-wrap{display:flex;justify-content:center;align-items:center;width:90px;height:90px;margin:0 auto;border-radius:10px}.grid-wrap .grid-img-wrap img{max-width:80px;max-height:80px;cursor:pointer}.grid-wrap .grid-text{width:80%;height:18px;line-height:18px;margin:0 auto;margin-top:5px;font-size:12px;border-radius:3px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;cursor:pointer}.grid-wrap .grid-text input{width:100%;height:100%;padding:0 2px;text-align:center;box-sizing:border-box}.isSelected .grid-img-wrap{background-color:#eee}.isSelected .grid-text{color:#fff;background-color:#06a7ff}",""])},593:function(e,t,i){"use strict";var a=i(344);i.n(a).a},594:function(e,t,i){var a=i(63);(e.exports=i(12)(!1)).push([e.i,".allFileWrap[data-v-6690e008]{padding:0 2px;height:100%;flex:1;display:flex;flex-direction:column}.allFileWrap .fileListWrap[data-v-6690e008]{box-sizing:border-box;display:flex;flex-direction:column;flex:1}.allFileWrap .emptyWrap[data-v-6690e008],.allFileWrap .errorWrap[data-v-6690e008]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.allFileWrap .emptyWrap .icon[data-v-6690e008],.allFileWrap .errorWrap .icon[data-v-6690e008]{width:123px;height:121px;background-size:contain;background-repeat:no-repeat;margin-bottom:13px}.allFileWrap .emptyWrap .line[data-v-6690e008],.allFileWrap .errorWrap .line[data-v-6690e008]{font-family:PingFangSC-Regular;font-size:13px;color:#666;letter-spacing:0;text-align:center}.allFileWrap .emptyWrap .line span[data-v-6690e008],.allFileWrap .errorWrap .line span[data-v-6690e008]{font-family:PingFangSC-Regular;color:#06a7ff;letter-spacing:0;text-align:center;margin:5px;margin-bottom:6px;cursor:pointer}.allFileWrap .requestLoaddingWrap[data-v-6690e008]{width:30px;height:30px;background-size:contain;background-repeat:no-repeat}.allFileWrap .pathHistory[data-v-6690e008]{display:flex;align-items:center;box-sizing:border-box;color:#333;height:20px;line-height:20px}.allFileWrap .pathHistory .pathBox[data-v-6690e008]{display:flex;align-items:center}.allFileWrap .pathHistory .pathBox .path[data-v-6690e008]{margin-right:5px;max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.allFileWrap .pathHistory .pathBox .arrow[data-v-6690e008]{margin-right:5px;width:5px;height:8.5px;background-image:url("+a(i(233))+");background-size:contain;background-repeat:no-repeat;background-position:50% 50%}.allFileWrap .pathHistory .clickAblePath[data-v-6690e008]{cursor:pointer;color:#999}.allFileWrap .pathHistory .clickAblePath:hover .path[data-v-6690e008]{color:#4691fe}.allFileWrap .titles[data-v-6690e008]{display:flex;align-items:center;font-size:14px;height:40px;box-sizing:border-box;padding:0 20px}.allFileWrap .higherThanWrap[data-v-6690e008]::-webkit-scrollbar{width:0!important;opacity:0!important}.allFileWrap .fileList[data-v-6690e008]{overflow-y:scroll;height:100%}.allFileWrap .fileList .placeholderBlock[data-v-6690e008]{height:40px}.allFileWrap .fileList .placeholderBg1[data-v-6690e008]{background-color:#fafafa}.allFileWrap .fileList .placeholderBg0[data-v-6690e008]{background-color:#fff}.allFileWrap .loadMore[data-v-6690e008]{text-align:center;width:100%;top:0;margin:10px 0;color:#666;font-size:12px}.allFileWrap .loadMore span[data-v-6690e008]{cursor:pointer}.allFileWrap .globalMask[data-v-6690e008]{position:fixed;width:100vw;height:100vh;z-index:1000;left:0;top:0;background-color:transparent}.allFileWrap .heightWrap[data-v-6690e008]{min-height:100%;overflow:hidden}.allFileWrap .wrapGrid[data-v-6690e008]{display:flex;flex-wrap:wrap;margin:0 auto;padding-top:10px}",""])},595:function(e,t,i){"use strict";var a=i(345);i.n(a).a},596:function(e,t,i){(e.exports=i(12)(!1)).push([e.i,'.fileItemWrap,.fileTitleWrap{display:flex;align-items:center;font-size:14px;height:40px;box-sizing:border-box}.fileItemWrap .checkbox,.fileTitleWrap .checkbox{box-sizing:border-box;padding:0 0 0 15px;width:60%;height:100%}.fileItemWrap .fileInfo,.fileTitleWrap .fileInfo{display:flex;justify-content:space-between;width:100%;box-sizing:border-box;padding-left:10px;padding-right:10px}.fileItemWrap .fileInfo .info,.fileTitleWrap .fileInfo .info{color:#414142;display:flex;align-items:center;width:100%}.fileItemWrap .fileInfo .info input,.fileTitleWrap .fileInfo .info input{position:relative;z-index:10000}.fileItemWrap .fileInfo .icon,.fileTitleWrap .fileInfo .icon{width:20px;height:20px;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}.fileItemWrap .fileInfo .filename,.fileTitleWrap .fileInfo .filename{cursor:pointer;padding-left:10px;font-size:14px;white-space:nowrap;max-width:calc(100% - 100px);overflow:hidden;text-overflow:ellipsis;font-family:PingFangSC-Regular;font-size:12px;color:#333;letter-spacing:0;line-height:40px}.fileItemWrap .fileInfo .operate,.fileTitleWrap .fileInfo .operate{visibility:hidden;position:relative;z-index:-1;box-sizing:border-box;margin-left:auto}.fileItemWrap .fileInfo .operate:after,.fileTitleWrap .fileInfo .operate:after{content:"";display:block;clear:both}.fileItemWrap .fileInfo .operate>div,.fileTitleWrap .fileInfo .operate>div{width:15px;height:15px;background-size:15px 30px;background-repeat:no-repeat;margin-left:5px;float:left}.fileItemWrap .fileInfo .operate .download,.fileItemWrap .fileInfo .operate .share,.fileTitleWrap .fileInfo .operate .download,.fileTitleWrap .fileInfo .operate .share{margin-right:5px}.fileItemWrap .fileInfo .operate .more,.fileTitleWrap .fileInfo .operate .more{position:relative}.fileItemWrap .fileInfo .showOperateMenu,.fileTitleWrap .fileInfo .showOperateMenu{display:flex}.fileItemWrap:hover,.fileTitleWrap:hover{background-color:#f2f2f2}.fileItemWrap:hover .operate,.fileTitleWrap:hover .operate{visibility:visible;z-index:auto}.fileItemWrap .locate,.fileItemWrap .modifyTime,.fileItemWrap .size,.fileTitleWrap .locate,.fileTitleWrap .modifyTime,.fileTitleWrap .size{box-sizing:border-box;padding-left:10px;color:#747474;width:20%;font-family:PingFangSC-Regular;font-size:12px;color:#999;letter-spacing:0}.fileItemWrap{position:absolute;width:100%;top:0}.fileItemWrap .locate .text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80%;display:inline-block;box-sizing:border-box;border-bottom:1px dashed #38b9ff;cursor:pointer}.fileItemWrap .locate .text:hover{color:#3e3e3e}.isDragover{box-shadow:inset 0 0 0 2px #3888ff;background-color:rgba(56,136,255,.05)}.searchWrap .checkbox,.searchWrap .fileItemWrap .checkbox{width:40%}.selected{background-color:#06a7ff!important}.selected .fileInfo .info .filename,.selected .locate,.selected .modifyTime,.selected .size{color:#fff}.selected .operate>div{background-position:0 100%}.forceHover{background-color:#f2f2f2}.forceHover .operate{visibility:hidden;z-index:-1}.fileTitleWrap{display:block;height:30px;font-size:12px;background-color:#fafafa;padding:0}.fileTitleWrap .fileInfo{padding-left:0}.fileTitleWrap .fileInfo .filename{cursor:default;font-size:12px}.fileTitleWrap .locate,.fileTitleWrap .modifyTime,.fileTitleWrap .size{height:100%;line-height:30px;font-family:PingFangSC-Regular;font-size:12px;color:#666;letter-spacing:0}.fileTitleWrap:hover{background-color:#fafafa}.fileTitleWrap .fileInfo,.fileTitleWrap .locate,.fileTitleWrap .modifyTime,.fileTitleWrap .size{display:flex;justify-content:space-between;align-items:center}.fileTitleWrap .fileInfo .icon,.fileTitleWrap .locate .icon,.fileTitleWrap .modifyTime .icon,.fileTitleWrap .size .icon{margin-right:10px;width:11.3px;height:7.3px;background-size:contain;background-repeat:no-repeat;transform:180deg}.fileTitleWrap .checkbox,.fileTitleWrap .locate,.fileTitleWrap .modifyTime,.fileTitleWrap .size{position:relative;float:left}.fileTitleWrap .checkbox:active,.fileTitleWrap .locate:active,.fileTitleWrap .modifyTime:active,.fileTitleWrap .size:active{background-color:#ecedef}.fileTitleWrap .checkbox .modifyWidth,.fileTitleWrap .locate .modifyWidth,.fileTitleWrap .modifyTime .modifyWidth,.fileTitleWrap .size .modifyWidth{position:absolute;width:2px;height:100%;right:0;background-color:#f2f2f2}.gridTitleWrap .checkbox{width:100%}.gridTitleWrap .checkbox:active{background:#fafafa}.frameSelect{position:absolute;top:0;left:0;background-color:rgba(139,179,240,.5);border:1px solid #8bb3f0}',""])},646:function(e,t,i){"use strict";var a=Math.ceil,r=Math.abs,s=Math.floor;i.r(t);var n,o=i(584),l=i.n(o),c=i(87),f=i.n(c),p=i(301),h=i.n(p),d=i(302),u=i.n(d),g=i(20),m=i.n(g),v=i(254),x=i(224),b=i(77),A=i(66),w=i.n(A),k=i(26),y=i.n(k),I=i(1),F=i(320),W=i(14),S=i(70),C=i.n(S),T=i(2),D=i(76),_=i(227),N=i(8),L=(i(1).remote.dialog,Object(W.createNamespacedHelpers)("allFile")),P=L.mapState,z=L.mapActions,O=(Object(W.createNamespacedHelpers)("globalComponents").mapActions,Object(W.createNamespacedHelpers)("downloading")),B=O.mapActions,E=(O.mapState,{props:{fileInfo:{type:Object,default:function(){return{}}},isSelected:{type:[Boolean,Number],default:!1},showOperate:{type:Boolean,default:!0},forceHover:{type:Number,default:0},top:{type:Number,default:0}},data:function(){return{dragNum:null,itemH:40,newFolderName:"Новая папка",renameValue:"",isDir:!1}},mounted:function(){this.wrap=this.$refs.wrap,"mkdir"!==this.fileInfo.from&&this.initPosition(),"isMkdir"===this.fileInfo.curOperateStatus&&(this.$refs.mkdirInput.focus(),this.$refs.mkdirInput.select()),this.isDir=this.fileInfo.is_dir||this.fileInfo.isdir},computed:m()({},P(["selectedFiles","curPage","isSortDesc","sortType","createFileName","files","renameFileName"])),methods:m()({dragenter:function(e){var t=this;this.isDir&&(this.dragNum?this.dragNum=2:++this.dragNum,setTimeout(function(){t.changeNotArr({component:"dragServerPath",state:{path:t.fileInfo.path,isCurDir:!1,name:t.getFileName(t.fileInfo.path)}})},0),e.preventDefault(),e.stopPropagation())},dragover:function(e){this.isDir&&e.preventDefault()},dragleave:function(e){this.isDir&&(this.changeNotArr({component:"dragServerPath",state:{path:"",isCurDir:!1}}),--this.dragNum,e.preventDefault(),e.stopPropagation())},onDrap:function(e){if(this.isDir){this.dragNum=null,this.$parent.closeToast();var t=this.$parent.getDrapFiles&&this.$parent.getDrapFiles(e);t&&t.length&&this.$parent.uploadAction(t,this.fileInfo.path),e.preventDefault(),e.stopPropagation()}},initPosition:function(){var e=this.top*this.itemH+this.wrap.offsetParent.offsetTop;this.changeNotArr({component:"filesYPosition",state:y()({},this.fileInfo.fs_id,[e,e+this.wrap.clientHeight])})},renameAction:function(){this.$parent.$parent.renameAction()},cancelRename:function(){this.$parent.$parent.cancelRename(this.fileInfo.fs_id)},mkdirAction:function(){this.$parent.$parent.mkdirAction()},cancelMkdir:function(){this.$parent.$parent.cancelMkdir()},jumpToCurDir:function(){var e=this.fileInfo.path.split("/").slice(0,-1).map(function(e){return"/"+e});this.$router.push({name:"allFile",query:{path:Object(D.a)(e)}}),this.changeNotArr({component:"search_hideInput",state:!1})},getFileName:function(e){var t=e.split("/").pop();return"apps"===t&&"Все документы"===this.getCurDir(e)&&(t="我的应用数据"),t},getCurDir:function(e){var t=e.split("/");t.pop();var i=t.pop();return"/"===(i=i||"/")&&(i="Все документы"),1===t.length&&"apps"===i&&(i="Данные моего приложения"),i},getTime:function(){var e=this.fileInfo.mtime||this.fileInfo.server_mtime;return e+=N.a.gmtOffset,C()(1e3*e).format("YYYY.MM.DD HH:mm")},getSize:function(){var e=this.fileInfo;return this.isDir?"-":Object(F.a)(e.size,2,!0)},intoDir:function(){this.$parent.$parent.openOrPreview(this.fileInfo.fs_id)},dbclick:function(){this.intoDir()},selectCheckBox:function(){this.$emit("selectCheckBox",w()(this.fileInfo))},changeSelectedFiles:function(e){2===e.button&&1<this.selectedFiles.length||this.$emit("changeSelectedFiles",w()(this.fileInfo))},getFileicon:function(){var e=this.fileInfo,t=e.path;return"isMkdir"===e.curOperateStatus?"Grid_Folder.png":"apps"===t.split("/").pop()&&"Все документы"===this.getCurDir(t)?"Apps.png":Object(_.b)(t,this.isDir)},share:function(){I.ipcRenderer.send("onShare",[this.fileInfo])},downloadingFile:function(){var e=this.fileInfo;e.currentPath=this.$route.query.path,this.add2DownloadingFiles([e])}},z(["changeNotArr"]),B({add2DownloadingFiles:"addFiles"})),watch:{"fileInfo.curOperateStatus":function(e){var t=this;this.$nextTick(function(){"rename"===e&&(t.renameValue=t.getFileName(t.fileInfo.path),t.$refs.renameInput.focus(),t.$refs.renameInput.select())})},newFolderName:function(e){this.changeNotArr({component:"createFileName",state:e})},createFileName:function(e){this.newFolderName=e},renameValue:function(e){this.changeNotArr({component:"renameFileName",state:e})},renameFileName:function(e){this.renameValue=e}},components:{checkBox:x.a}}),M=i(7),$=Object(M.a)(E,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"wrap",class:{fileItemWrap:!0,selected:e.isSelected,forceHover:e.forceHover,isDragover:1===e.dragNum},style:{top:e.top*e.itemH+"px"},on:{click:e.changeSelectedFiles,dblclick:e.dbclick,contextmenu:e.changeSelectedFiles}},[a("check-box",{attrs:{checked:e.isSelected,selected:e.isSelected,click:e.selectCheckBox}},[a("div",{ref:"fileInfo",staticClass:"fileInfo",on:{drop:e.onDrap,dragenter:e.dragenter,dragover:e.dragover,dragleave:e.dragleave}},[a("div",{staticClass:"info"},[a("div",{staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(236)("./"+e.getFileicon())+"\n                    )"}}),e._v(" "),"isMkdir"===e.fileInfo.curOperateStatus?a("div",{staticClass:"filename operateWrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFolderName,expression:"newFolderName"}],ref:"mkdirInput",attrs:{type:"text"},domProps:{value:e.newFolderName},on:{click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mkdirAction(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelMkdir(t)}],input:function(t){t.target.composing||(e.newFolderName=t.target.value)}}})]):"rename"===e.fileInfo.curOperateStatus?a("div",{staticClass:"filename operateWrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.renameValue,expression:"renameValue"}],ref:"renameInput",attrs:{type:"text"},domProps:{value:e.renameValue},on:{click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.renameAction(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelRename(t)}],input:function(t){t.target.composing||(e.renameValue=t.target.value)}}})]):a("div",{staticClass:"filename",attrs:{title:e.getFileName(e.fileInfo.path)},on:{click:function(t){return t.stopPropagation(),e.intoDir(t)}}},[e._v("\n                    "+e._s(e.getFileName(e.fileInfo.path))+"\n                ")]),e._v(" "),e.showOperate?a("div",{staticClass:"operate"},[a("div",{staticClass:"share",style:{backgroundImage:"url(\n                        "+i(316)+"\n                    )"},attrs:{title:"доля"},on:{click:e.share}}),e._v(" "),a("div",{staticClass:"download",style:{backgroundImage:"url(\n                        "+i(314)+"\n                    )"},attrs:{title:"Скачать вниз"},on:{click:e.downloadingFile}}),e._v(" "),a("div",{staticClass:"more toggleOperateMenu",style:{backgroundImage:"url(\n                        "+i(315)+"\n                    )"},attrs:{title:"более"}})]):e._e()])])]),e._v(" "),a("div",{staticClass:"size"},[e._v("\n        "+e._s("isMkdir"===e.fileInfo.curOperateStatus?"-":e.getSize())+"\n    ")]),e._v(" "),a("div",{staticClass:"modifyTime"},[e._v("\n        "+e._s("isMkdir"===e.fileInfo.curOperateStatus?"-":e.getTime())+"\n    ")]),e._v(" "),e.$parent.isSearchPage?a("div",{staticClass:"locate",on:{click:function(t){return t.stopPropagation(),e.jumpToCurDir(t)}}},[a("div",{staticClass:"text"},[e._v(e._s(e.getCurDir(e.fileInfo.path)))])]):e._e()],1)},[],!1,null,"cc7d3576",null).exports,Y=i(283);i(6);!function(e){e[e.dirtyData=0]="dirtyData",e[e.video=1]="video",e[e.audio=2]="audio",e[e.img=3]="img",e[e.doc=4]="doc",e[e.apk=5]="apk",e[e.other=6]="other",e[e.BT=7]="BT"}(n||(n={}));var R=n,H=(i(203),Object(W.createNamespacedHelpers)("allFile")),j=H.mapState,q=(H.mapGetters,H.mapActions),V={components:{},props:{fileInfo:{type:Object,default:function(){return{}}},isSelected:{type:[Boolean,Number],default:!1},forceHover:{type:Number,default:0}},data:function(){return{newFolderName:"Новая папка",renameValue:"",isDir:!1,img:R.img,video:R.video,dragNum:null}},mounted:function(){"isMkdir"===this.fileInfo.curOperateStatus&&(this.$refs.mkdirInput.focus(),this.$refs.mkdirInput.select()),this.isDir=this.fileInfo.is_dir||this.fileInfo.isdir},methods:m()({dragenter:function(e){var t=this;this.isDir&&(this.dragNum?this.dragNum=2:++this.dragNum,setTimeout(function(){t.changeNotArr({component:"dragServerPath",state:{path:t.fileInfo.path,isCurDir:!1,name:t.getFileName(t.fileInfo.path)}})},0),e.preventDefault(),e.stopPropagation())},dragover:function(e){this.isDir&&e.preventDefault()},dragleave:function(e){this.isDir&&(this.changeNotArr({component:"dragServerPath",state:{path:"",isCurDir:!1}}),--this.dragNum,e.preventDefault(),e.stopPropagation())},onDrap:function(e){if(this.isDir){this.dragNum=null,this.$parent.closeToast();var t=this.$parent.getDrapFiles&&this.$parent.getDrapFiles(e);t&&t.length&&this.$parent.uploadAction(t,this.fileInfo.path),e.preventDefault(),e.stopPropagation()}},getFileName:function(e){var t=e.split("/").pop();return"apps"===t&&(t="Данные моего приложения"),t},getFileIcon:function(){var e=this.fileInfo,t=e.path;return"isMkdir"===e.curOperateStatus||"mkdir"===e.from?"Grid_Folder.png":"apps"===t.split("/").pop()?"Apps.png":Object(_.b)(t,e.is_dir)},intoDir:function(){this.$parent.$parent.openOrPreview(this.fileInfo.fs_id)},changeSelectedFiles:function(e){2===e.button&&1<this.selectedFiles.length||this.$emit("changeSelectedFiles",w()(this.fileInfo))},mkdirAction:function(){this.$parent.$parent.mkdirAction()},cancelMkdir:function(){this.$parent.$parent.cancelMkdir()},renameAction:function(){this.$parent.$parent.renameAction()},cancelRename:function(){this.$parent.$parent.cancelRename(this.fileInfo.fs_id)},isThumbnail:function(e){return e.category===this.img||e.category===this.video},showTitle:function(e){if("isMkdir"===this.fileInfo.curOperateStatus)return"Новая папка";if("rename"===this.fileInfo.curOperateStatus)return"Переименование";var t=e.split("/").pop();return"apps"===t&&(t="Данные моего приложения"),t},getSize:function(){var e=this.fileInfo;return e.is_dir?"-":Object(F.a)(e.size,2,!0)},getTime:function(){var e=this.fileInfo.mtime||this.fileInfo.server_mtime;return e+=N.a.gmtOffset,C()(1e3*e).format("YYYY.MM.DD HH:mm")}},q(["changeFileArray","changeNotArr"])),computed:m()({},j(["createFileName","files","renameFileName","gridTimer","refreshed"])),filters:{beautySub:function(e){var t=e.split("/").pop();return"apps"===t&&(t="Данные моего приложения"),t}},watch:{"fileInfo.curOperateStatus":function(e){var t=this;this.$nextTick(function(){"isMkdir"===e&&(t.$refs.mkdirInput.focus(),t.$refs.mkdirInput.select()),"rename"===e&&(t.renameValue=t.getFileName(t.fileInfo.path),t.$refs.renameInput.focus(),t.$refs.renameInput.select())})},"fileInfo.thumbnail":function(e){if(void 0===e){var t=this.gridTimer;this.changeNotArr({component:"gridTimer",state:t+=1}),this.files.length-1||(t-=1),t===this.files.length-1&&this.changeNotArr({component:"refreshed",state:!this.refreshed})}},newFolderName:function(e){this.changeNotArr({component:"createFileName",state:e})},createFileName:function(e){this.newFolderName=e},renameValue:function(e){this.changeNotArr({component:"renameFileName",state:e})},renameFileName:function(e){this.renameValue=e}}},Q=(i(591),Object(M.a)(V,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-wrap",class:{isSelected:e.isSelected,forceHover:e.forceHover,isDragover:1===e.dragNum},on:{dragenter:e.dragenter,dragover:e.dragover,dragleave:e.dragleave,drop:e.onDrap,dblclick:e.intoDir}},[a("div",{staticClass:"grid-img-wrap",attrs:{title:(e.isDir||e.fileInfo.isdir?"\nИмя："+e.showTitle(e.fileInfo.path)+"\nМодифицированное время："+e.getTime():"\nИмя："+e.showTitle(e.fileInfo.path)+"\nразмер："+e.getSize()+"\nМодифицированное время："+e.getTime())+"\n        "},on:{click:e.changeSelectedFiles,mousedown:function(e){return e.stopPropagation(),void e.preventDefault()}}},[a("img",{style:{width:e.isThumbnail(e.fileInfo)&&e.fileInfo.thumbnail?"auto":"58px"},attrs:{src:""+(e.isThumbnail(e.fileInfo)&&e.fileInfo.thumbnail?e.fileInfo.thumbnail:i(236)("./"+e.getFileIcon())),alt:""}})]),e._v(" "),"isMkdir"===e.fileInfo.curOperateStatus?a("div",{staticClass:"grid-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFolderName,expression:"newFolderName"}],ref:"mkdirInput",attrs:{type:"text"},domProps:{value:e.newFolderName},on:{click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mkdirAction(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelMkdir(t)}],input:function(t){t.target.composing||(e.newFolderName=t.target.value)}}})]):"rename"===e.fileInfo.curOperateStatus?a("div",{staticClass:"grid-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.renameValue,expression:"renameValue"}],ref:"renameInput",attrs:{type:"text"},domProps:{value:e.renameValue},on:{click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.renameAction(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelRename(t)}],input:function(t){t.target.composing||(e.renameValue=t.target.value)}}})]):a("div",{staticClass:"grid-text",attrs:{title:e.showTitle(e.fileInfo.path)},on:{click:e.changeSelectedFiles,mousedown:function(e){return e.stopPropagation(),void e.preventDefault()}}},[e._v(" "+e._s(e._f("beautySub")(e.fileInfo.path)))])])},[],!1,null,null,null).exports),U=i(40),X=i(288),G=i(203),K=Object(W.createNamespacedHelpers)("allFile"),J=K.mapState,Z=K.mapActions,ee=K.mapGetters,te=Object(W.createNamespacedHelpers)("globalComponents"),ie=te.mapState,ae=te.mapActions,re=Object(W.createNamespacedHelpers)("uploading").mapActions,se=Object(W.createNamespacedHelpers)("userInfo").mapState,ne=Object(W.createNamespacedHelpers)("history").mapState,oe={mounted:function(){var e=this;I.remote.screen;this.$refs.fileList.addEventListener("mousedown",this.mousedown),window.addEventListener("mouseup",this.mouseup),window.addEventListener("mousemove",this.mousemove),this.$request=I.remote.app.$request,this.initRelyWinSize(),window.addEventListener("resize",function(){e.initRelyWinSize()}),this.$refs.fileList.addEventListener("scroll",function(){var t=e.$refs.fileList.scrollTop;if(e.scrollTop=t,e.lastCrolloverItemLength=e.crolloverItemLength,e.crolloverItemLength=s(e.scrollTop/e.fileItemH),e.lastCrolloverItemLength!==e.crolloverItemLength){var i=e.crolloverItemLength-e.lastCrolloverItemLength,a=r(i);0<e.crolloverItemLength-e.lastCrolloverItemLength?e.startIndex+=a:e.startIndex-=a}}),this.row=s(this.$refs.fileListWrap.offsetWidth/120),this.rol=a(this.$refs.fileListWrap.offsetHeight/133)},beforeDestroy:function(){this.$refs.fileList.removeEventListener("mousedown",this.mousedown),window.removeEventListener("mouseup",this.mouseup),window.removeEventListener("mousemove",this.mousemove)},components:{fileItem:$,gridItem:Q,checkBox:x.a,listDesc:v.a,tipsPage:b.a},beforeUpdate:function(){this.files.length&&this.canUpdate&&(this.canUpdate=!1,this.whenUpdate()),this.sign&&this.files.length&&(this.sign=!1,this.cacheFn())},methods:m()({getDragText:function(){return this.dragServerPath.isCurDir?"当Передняя папка":this.dragServerPath.name},showDragToast:function(e){e.length>20&&(e=e.slice(0,20)+"..."),this.lastDragToast=this.$toast(«Перетащите и загрузите в"'+e+'"',"info")},dragenter:function(e){this.isSearchPage||(this.dragNum?this.dragNum=2:++this.dragNum),e.preventDefault()},dragover:function(e){e.preventDefault()},dragleave:function(e){this.isSearchPage||--this.dragNum,e.preventDefault()},closeToast:function(){this.lastDragToast&&this.$closeToast(this.lastDragToast)},onDrap:function(e){if(!this.isSearchPage){this.dragNum=null,this.closeToast();var t=this.getDrapFiles(e);this.uploadAction(t)}e.preventDefault()},getDrapFiles:function(e){var t=null;if(e.dataTransfer&&e.dataTransfer.files){var i=e.dataTransfer.files,a=i.length;if(0<a){t=Array(a);for(var r=0;r<a;r++)t[r]=i[r].path}}return t},uploadAction:function(e,t){var i=this;return u()(h.a.mark(function a(){var r;return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e){a.next=3;break}return a.abrupt("return");case 3:if(t=t||i.curDirPath,r=void 0,2!==i.vipType){a.next=11;break}return a.next=8,X.a.buildFolderTree(e);case 8:r=a.sent,a.next=14;break;case 11:return a.next=13,X.a.buildFolderTree(e,T.p);case 13:r=a.sent;case 14:i.updateSelectedFiles({files:e,server_dir:t,allPaths:r}),a.next=22;break;case 17:if(a.prev=17,a.t0=a.catch(0),-1!==(a.t0+"").indexOf("Количество загружаемых файлов превышает 500")){a.next=21;break}return a.abrupt("return");case 21:I.remote.dialog.showMessageBox({type:"info",title:"Превышен лимит в 500 файлов",message:"Станьте супер-членом немедленно, неограниченная загрузка пакета.",buttons:["Открыть Super Member "," Отказаться от загрузки"]},function(e){0===e&&i.$jumpVipPage("batchupload_batchupload")});case 22:case"end":return a.stop()}},a,i,[[0,17]])}))()},whenUpdate:function(){this.fileAllItemH=this.files.length*this.fileItemH,this.higherThanWrap=this.fileAllItemH>this.fileListH},initRelyWinSize:function(){this.fileListH=this.$refs.fileListWrap.offsetHeight-this.$refs.fileTitleWrap.offsetHeight,this.loadable=a(this.fileListH/this.fileItemH);if(!this.switchView){var e=s(this.$refs.fileListWrap.offsetWidth/120);this.gridWrap=120*e,this.row=e,this.rol=a(this.$refs.fileListWrap.offsetHeight/133)}},_getTips:function(){var e="К сожалению! Грубая проблема!";switch(this.requestFailStatus){case-9:e=Object(U.a)(this.requestFailStatus)}return e},selectCheckBox:function(e,t){this.changeFileArray({component:"selectedFiles",isDelete:this.selectedFilesObj[e.fs_id],state:JSON.parse(t)})},changeSelectedFiles:function(e){var t=this,i=JSON.parse(e),a=!0;if(this.ctrl)a=!1;else if(this.shift&&this.selectedFiles.length){var r=this.files.findIndex(function(e){return e.fs_id===i.fs_id}),s=this.files.findIndex(function(e){return e.fs_id===t.selectedFiles[0].fs_id});s>r&&(s=this.files.findIndex(function(e){return e.fs_id===t.selectedFiles[0].fs_id})),i=s<r?this.files.slice(s,r+1):this.files.slice(r,s+1)}this.changeFileArray({component:"selectedFiles",isResetAdd:a,state:i})},showOperate:function(e){return 1<this.selectedFiles.length?!this.selectedFilesObj[e.fs_id]:!(1<this.inPosFiles.length&&this.inPosFilesObj[e.fs_id])},mkdir:function(){I.remote.app.$addStatLog("op=newFolderFromEmpty@#type=click@#count=$1"),this.$parent.mkdir()},reTry:function(){I.remote.app.$addStatLog("op=refershByRetry@#type=click@#count=$1"),this.$parent.refresh(),this.changeComponentState({component:"allFileRequestFail",state:!1})},rotateByDesc:function(){return this.isSortDesc?"0":"180deg"},loadMore:function(){if(this.isSearchPage){if(!this.searchRequestCompleted)return;var e=this.$route.query.key;++this.search_curpage,this.$parent.searchOperate({operate:"add",params:{key:e,page:this.search_curpage}})}else{if(!this.allFileRequestCompleted)return;this.$fetchFileList({vuexModule:T.k,operate:"add",showLoading:!1}),this.changeNotArr({component:"preLoad",state:!this.preLoad})}},sortDesc:function(e){var t=!1;this.lastSortType===e?t=!t:this.lastSortType=e,this.$parent.sortByType(e,t)},jumpCurrentDir:function(e){e+1<this.curDirArr.length&&(this.$router.push({name:"allFile",query:{path:Object(D.a)(this.curDirArr.slice(0,e+1))}}),this.changeNotArr({component:"search_hideInput",state:!1}),this.changeComponentState({component:"allFileRequestFail",state:!1}))},convertPath:function(e){switch(e){case"/":e="Все документы";break;case"/apps":e="Данные моего приложения";break;default:e=e.replace("/","")}return e},scroll:function(){var e=this;this.scrollDis=this.$refs.fileList.scrollTop,this.switchView||(this.scrolling="scroll",this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.cacheFn(),e.scrolling=!0},100))},cacheFn:function(){for(this.doThumb();0<this.imgCacheList.length;)this.doCache(this.imgCacheList.shift()),1>this.imgCacheList.length&&(this.scrolling=!this.scrolling)},doThumb:function(e,t){var i=this,a=this.row,r=this.rol,n=s(this.scrollDis/133)*a,o=n+a*r,l=this.files.slice(n,o);this.start=o,e&&t&&(l=this.files.slice(e,e+t),this.start=e+t),l.filter(function(e){return e.category===R.img||e.category===R.video}).map(function(e){var t=i.files.findIndex(function(t){return t===e});i.imgCacheList.includes(e)||i.idxList.includes(t)||(i.imgCacheList.push(e),i.idxList.push(t))})},doCache:function(e){var t=this;return u()(h.a.mark(function i(){var a,r,s,n,o;return h.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.$userInfo,r=a.BDUSS,s=a.STOKEN,i.next=3,Object(Y.a)(e,"BDUSS="+r+";STOKEN="+s,!1);case 3:"string"==typeof(n=i.sent)&&(o=m()({},e,{thumbnail:G.base64Sync(n)}),t.changeFileArray({component:"files",isModify:!0,state:{fs_id:o.fs_id,data:o}}));case 5:case"end":return i.stop()}},i,t)}))()},mouseup:function(e){var t=e.target;if(2!==e.button){var i=document.querySelector(".operateMenumask"),a=i&&i.contains(t),s=document.querySelector(".commonOperate .options").contains(t);if(!this.$refs.fileList||this.$refs.fileList.contains(t)||a||s||this.isRenameStatus||t.classList.contains("checkbox-full-icon")||this.changeFileArray({component:"selectedFiles",state:null}),this.canmove){if(this.canmove=!1,!this.switchView)return this.frameW=0,this.frameH=0,void this.changeFileArray({component:"selectedFiles",isResetAdd:!0,state:this.gridSelect});if(null===this.downY)return;if(null!==this.downY&&5>r(this.moveY-this.downY))return this.changeFileArray({component:"inPosFiles",state:null}),this.downY=null;this.downY=null,this.changeFileArray({component:"selectedFiles",isResetAdd:!0,state:this.inPosFiles}),this.changeFileArray({component:"inPosFiles",state:null})}}},mousemove:function(e){if(this.canmove){if(!this.switchView)return void this.gridMove(e);var t,i,a=this.$refs.fileList,r=a?a.offsetTop:0,s=a?r+a.clientHeight:0;if(this.moveY=e.clientY,null===this.downY)return this.downY=e.clientY;if(e.pageY<r||e.pageY>s)return;var n=this.downY+this.scrollDis,o=e.clientY+this.scrollDis,l=[n,o];0<n-o&&(l=[o,n]);var c=f()(this.filesYPosition);if(c.sort(function(e,t){return e[1][1]<t[1][1]?-1:1}),!c.length)return;var p=c.find(function(e){var t=e[1][0],i=e[1][1];return t<l[0]&&i>l[0]||t>l[0]}),h=c.reverse().find(function(e){var t=e[1][0],i=e[1][1];return t<=l[1]&&i>l[1]||i<l[1]&&void 0!==p});if(void 0===p||void 0===h)return;t=this.files.findIndex(function(e){return e.fs_id==p[0]}),i=this.files.findIndex(function(e){return e.fs_id==h[0]}),this.changeFileArray({component:"inPosFiles",isResetAdd:!0,state:this.files.slice(t,i+1)})}},mousedown:function(e){2===e.button||this.isRenameStatus||this.isCreateStatus||(this.canmove=!0,this.originX=e.clientX-200,this.originY=e.clientY+this.scrollDis-105,this.origin=[this.originX,this.originY],this.gridSelect=null)},gridMove:function(e){var t=e.clientX-200;t>this.$refs.fileListWrap.offsetWidth&&(t=this.$refs.fileListWrap.offsetWidth);var i=e.clientY+this.scrollDis-105,a=t-this.originX,s=i-this.originY;this.pointX=0<a?this.originX:t,this.pointY=0<s?this.originY:i,this.frameW=r(a),this.frameH=r(s);var n=[t,i];this.gridSelected(this.origin,n)},gridSelected:function(e,t){var i=this,r=l()(e,2),n=r[0],o=r[1],c=l()(t,2),f=c[0],p=c[1],h=120,d=(document.getElementsByClassName("heightWrap")[0].clientWidth-this.gridWrap)/2,u=n>f?f:n,g=n>f?n:f,m=o>p?p:o,v=o>p?o:p,x=d+this.gridWrap;0>u&&(u=0);var b=u>d?(u-d)/h:u/h,A=g>x?x/h:(g-d)/h,w=85<100*b%100?a(b):s(b),k=15<100*A%100?a(A):s(A),y=(a(m/133)-1)*this.row+w;0>y&&(y=0);var I=(a(v/133)-1)*this.row+k,F=this.files.slice(y,I).filter(function(e,t){for(var a=w;a<k;a++)if((t+y)%i.row===a)return e});this.changeFileArray({component:"selectedFiles",isResetAdd:!0,state:F}),this.gridSelect=F},selectAll:function(){this.selectedFiles.length===this.files.length?this.changeFileArray({component:"selectedFiles",state:null}):this.changeFileArray({component:"selectedFiles",isResetAdd:!0,state:this.files})},upload:function(){this.$upload()},getCurRenderFiles:function(){var e=1*this.loadable,t=this.startIndex-e,i=this.startIndex+this.loadable+e;return 0>t&&(t=0),i>this.files.length&&(i=this.files.length),this.startTopIndex=t,this.files.slice(t,i)}},Z(["changeFileArray","changeNotArr"]),ae(["changeComponentState"]),re({updateSelectedFiles:"UPLOADING_UPDATE_SELECTEDFILES"})),watch:{preLoad:function(){this.sign=!0,this.idxList=[]},curHistory:function(){this.sign=!0,this.idxList=[]},sortType:function(){this.$refs.fileList.scrollTop=0,this.scrolling="scroll",this.idxList=[],this.imgCacheList=[],this.refreshing=!0},files:function(e,t){(e.length>t.length||this.refreshing)&&(this.cacheFn(),this.refreshing=!1),this.whenUpdate()},scrollT:function(e){this.$refs.fileList.scrollTop=e},dragServerPath:function(e){this.closeToast(),e.path&&this.showDragToast(this.getDragText())},scrolling:function(e){var t=this;"scroll"===e&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){for(t.doThumb(t.start,5);0<t.imgCacheList.length;)t.doCache(t.imgCacheList.shift()),1>t.imgCacheList.length&&(t.scrolling=!t.scrolling)},100)},refreshed:function(){clearTimeout(this.timerId),clearTimeout(this.timeout),this.$refs.fileList.scrollTop=0,this.scrolling="scroll",this.scrollDis=0,this.idxList=[],this.imgCacheList=[],this.switchView||(this.changeNotArr({component:"gridTimer",state:0}),this.refreshing=!0)},dragNum:function(e){0===e&&this.closeToast(),(1===e||2===e)&&(this.changeNotArr({component:"dragServerPath",state:{path:this.curDirPath,isCurDir:!0}}),this.closeToast(),this.showDragToast(this.getDragText()))},switchView:function(){this.initRelyWinSize()}},computed:m()({scrollT:function(){var e=this.scrollTop;if(this.selectedFiles.length&&this.ismoveByShortcut){var t=this.selectedFiles[this.selectedFiles.length-1],i=this.files.findIndex(function(e){return e.fs_id===t.fs_id})+1;i>=this.startIndex+this.loadable&&(e=i*this.fileItemH-this.fileListH),i-1<this.startIndex&&(e=(i-1)*this.fileItemH)}return 0>e&&(e=0),e},hasLoadMore:function(){return this.isSearchPage?this.search_hasNext:this.hasNext},overflowLength:function(){return this.curDirArr.length>this.pathHistoryMaxLen},isSortByName:function(){return T.y===this.sortType},isSortBySize:function(){return T.z===this.sortType},isSortByTime:function(){return T.A===this.sortType},isSearchPage:function(){return"search"===this.$route.name},isAllChecked:function(){return!!this.selectedFiles.length&&this.selectedFiles.length===this.files.length}},ee(["curDirPath","selectedFilesObj","inPosFilesObj"]),J(["dragServerPath","files","selectedFiles","filesYPosition","inPosFiles","curDirArr","cookieCache","sortType","isSortDesc","hasNext","curPage","search_hasNext","search_hideInput","isCreateStatus","isRenameStatus","isDeleteStatus","requestFailStatus","switchView","refreshed","preLoad"]),ie(["shift","ctrl","ismoveByShortcut","requestLoading","allFileRequestFail","allFileRequestCompleted","searchRequestCompleted","hasSonWin"]),ne(["curHistory"]),se(["vipType"])),data:function(){return{dragNum:null,lastDragToast:null,canUpdate:!0,crolloverItemLength:0,lastCrolloverItemLength:0,scrollTop:0,fileItemH:40,fileAllItemH:0,startIndex:0,fileListH:0,loadable:0,startTopIndex:0,canmove:!1,downY:null,moveY:null,scrollDis:0,SORTBYNAME:T.y,SORTBYSIZE:T.z,SORTBYTIME:T.A,lastSortType:T.A,search_curpage:1,pathHistoryMaxLen:5,higherThanWrap:!1,row:0,rol:0,gridWrap:700,timeout:!1,idxList:[],imgCacheList:[],sign:!1,refreshing:!1,scrolling:!1,timerId:!1,start:0,originX:0,originY:0,origin:[],frameW:0,frameH:0,pointX:0,pointY:0,gridSelect:[]}}},le=(i(593),i(595),Object(M.a)(oe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"allFileWrap",class:{allFileWrap:!0,searchWrap:e.isSearchPage,isDragover:!e.isSearchPage&&1===e.dragNum},on:{drop:e.onDrap,dragenter:e.dragenter,dragover:e.dragover,dragleave:e.dragleave}},[a("list-desc",{attrs:{filesLength:e.files.length,selectedLength:e.selectedFiles.length}},[a("div",{staticClass:"pathHistory"},[e._v("\n            "+e._s(e.overflowLength?"...":"")+"\n            "),e._l(e.curDirArr,function(t,i){return a("div",{key:i,class:{pathBox:!0,clickAblePath:i+1<e.curDirArr.length},on:{click:function(){return e.jumpCurrentDir(i)}}},[e.overflowLength&&e.curDirArr.length-i>=e.pathHistoryMaxLen?a("div"):[a("div",{staticClass:"path"},[e._v(e._s(e.convertPath(t,i)))]),e._v(" "),i+1<e.curDirArr.length?a("div",{staticClass:"arrow"}):e._e()]],2)})],2)]),e._v(" "),a("div",{ref:"fileListWrap",staticClass:"fileListWrap"},[e.switchView?a("div",{ref:"fileTitleWrap",class:{fileTitleWrap:!0,searchWrap:e.isSearchPage}},[a("check-box",{attrs:{click:e.selectAll,checked:e.isAllChecked,wrapClick:e.sortDesc.bind(this,e.SORTBYNAME)}},[a("div",{staticClass:"fileInfo"},[a("div",{staticClass:"filename"},[e._v("Имя файла")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSortByName,expression:"isSortByName"}],staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(250)+"\n                    )",transform:"rotate("+e.rotateByDesc()+")"}}),e._v(" "),a("div",{staticClass:"modifyWidth"})])]),e._v(" "),a("div",{staticClass:"size",on:{click:function(){return e.sortDesc(e.SORTBYSIZE)}}},[a("div",{staticClass:"text"},[e._v("大小")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSortBySize,expression:"isSortBySize"}],staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(250)+"\n                    )",transform:"rotate("+e.rotateByDesc()+")"}}),e._v(" "),a("div",{staticClass:"modifyWidth"})]),e._v(" "),a("div",{staticClass:"modifyTime",on:{click:function(){return e.sortDesc(e.SORTBYTIME)}}},[a("div",{staticClass:"text"},[e._v("Модифицированное время")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSortByTime,expression:"isSortByTime"}],staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(250)+"\n                    )",transform:"rotate("+e.rotateByDesc()+")"}}),e._v(" "),a("div",{staticClass:"modifyWidth"})]),e._v(" "),e.isSearchPage?a("div",{staticClass:"locate"},[a("div",{staticClass:"text"},[e._v("каталог")]),e._v(" "),a("div",{staticClass:"icon"}),e._v(" "),a("div",{staticClass:"modifyWidth"})]):e._e()],1):a("div",{ref:"fileTitleWrap",class:{fileTitleWrap:!0,gridTitleWrap:!0,searchWrap:e.isSearchPage}},[a("check-box",{attrs:{click:e.selectAll,checked:e.isAllChecked}},[a("div",{staticClass:"fileInfo"},[a("div",{staticClass:"filename"},[e._v("Все документы")])])])],1),e._v(" "),e.files.length||null===e.requestLoading||e.requestLoading||e.allFileRequestFail?e._e():a("tips-page",[a("div",{staticClass:"emptyWrap"},[a("div",{staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(312)+"\n                    )"}}),e._v(" "),a("div",{staticClass:"tips"},[e.isSearchPage?[a("div",{staticClass:"line"},[e._v("В вашем сетевом диске，Контент не найден")])]:[a("div",{staticClass:"line"},[e._v("\n                            Нажмите на"),a("span",{on:{click:e.upload}},[e._v("Загрузить")]),e._v("Добавить локальные файлы\n                        ")]),e._v(" "),a("div",{staticClass:"line"},[e._v("\n                            Или нажмите"),a("span",{on:{click:e.mkdir}},[e._v("Новая папка")])])]],2)])]),e._v(" "),e.allFileRequestFail&&!e.requestLoading?a("tips-page",[a("div",{staticClass:"errorWrap"},[a("div",{staticClass:"icon",style:{backgroundImage:"url(\n                        "+i(69)+"\n                    )"}}),e._v(" "),a("div",{staticClass:"tips"},[a("div",{staticClass:"line"},[e._v("\n                        "+e._s(e._getTips())+"\n                    ")]),e._v(" "),a("div",{staticClass:"line"},[a("span",{on:{click:e.reTry}},[e._v("Retry")])])])])]):e._e(),e._v(" "),e.requestLoading?a("tips-page",[a("div",{staticClass:"requestLoaddingWrap",style:{backgroundImage:"url(\n                        "+i(113)+"\n                    )"}})]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.requestLoading,expression:"files.length && !requestLoading"}],ref:"fileList",class:{fileList:!0,higherThanWrap:!e.higherThanWrap},on:{scroll:e.scroll}},[a("div",{staticClass:"heightWrap",style:{height:e.switchView?(e.files.length+e.hasLoadMore)*e.fileItemH+"px":"auto",position:"relative"}},[e.switchView?a("div",e._l(e.getCurRenderFiles(),function(t,i){return a("file-item",{key:(e.isSearchPage?"search-":"")+t.fs_id+t.path,attrs:{top:e.startTopIndex+i,fileInfo:t,isSelected:e.selectedFilesObj[t.fs_id],showOperate:e.showOperate(t),forceHover:e.inPosFilesObj[t.fs_id]},on:{changeSelectedFiles:e.changeSelectedFiles,selectCheckBox:function(i){e.selectCheckBox(t,i)}}})}),1):a("div",{staticClass:"wrapGrid",style:{width:e.gridWrap+"px"}},e._l(e.files,function(t,i){return a("grid-item",{key:i,attrs:{fileInfo:t,isSelected:e.selectedFilesObj[t.fs_id],showOperate:e.showOperate(t),forceHover:e.inPosFilesObj[t.fs_id]},on:{changeSelectedFiles:e.changeSelectedFiles,selectCheckBox:function(i){e.selectCheckBox(t,i)}}})}),1),e._v(" "),e.canmove&&(20<e.frameW||20<e.frameH)?a("div",{staticClass:"frameSelect",style:{width:e.frameW+"px",height:e.frameH+"px",top:e.pointY+"px",left:e.pointX+"px"}}):e._e(),e._v(" "),e.hasLoadMore?a("div",{staticClass:"loadMore",style:{position:e.switchView?"absolute":"static",transform:e.switchView?"translateY("+e.files.length*e.fileItemH+"px)":""}},[e.isSearchPage?a("span",{on:{click:e.loadMore}},[e._v(e._s(e.searchRequestCompleted?"Нажмите, чтобы загрузить больше":"Загрузка ..."))]):a("span",{on:{click:e.loadMore}},[e._v(e._s(e.allFileRequestCompleted?"Нажмите, чтобы загрузить больше":"Загрузка ..."))])]):e._e()])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSonWin||e.isCreateStatus||e.isRenameStatus||e.isDeleteStatus,expression:"hasSonWin || isCreateStatus || isRenameStatus || isDeleteStatus"}],staticClass:"globalMask",on:{click:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},mousedown:function(){}}})],1)],1)},[],!1,null,"6690e008",null));t.default=le.exports}}]);